<!DOCTYPE html>
<html lang="en">

<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
  <title>SPACECRAFT</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link href="style.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="192x192">
  <link rel="icon" sizes="192x192">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
  <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
</head>

<body>
  <ul id="planet">
    <li>SPACE</li>
    <li style="background-image:radial-gradient(circle at 50% 100%, #632, #964 30%, #c96 40%, #000 40%)">PLUTO</li>
    <li style="background-image:radial-gradient(circle at 50% 100%, #013, #025 48%, #046 58%, #013 59%, #000 61%)">NEPTUNE</li>
    <li style="background-image:radial-gradient(circle at 50% 100%, #133, #255 50%, #466 60%, #133 61%, #000 63%)">URANUS</li>
    <li style="background-image:radial-gradient(circle at 50% 100%, #320, #651 50%, #973 60%, #320 61%, #000 63%, #000 73%, #333 75%, #333 88%, #000 90%)">SATURN</li>
    <li style="background-image:radial-gradient(circle at 50% 100%, #420, #641 60%, #852 70%, #420 71%, #000 75%)">JUPITER</li>
    <li style="background-image:radial-gradient(circle at 50% 100%, #300, #510 35%, #630 45%, #310 46%, #000 48%)">MARS</li>
    <li style="background-image:radial-gradient(circle at 50% 100%, #222, #555 30%, #666 40%, #000 40%)">MOON</li>
  </ul>
  <div id="leftist" style="position:absolute;right:0%;height:750px;width:500px;background:red;opacity:0.6">

  </div>
  <div id="centerist" style="position:absolute;left:33.4%;height:750px;width:513px;background:blue;opacity:0.6">

  </div>
  <div id="rightest" style="position:absolute;height:750px;width:500px;background:green;opacity:0.6">

  </div>
  <div id="cursor" style="position:absolute;background:url(https://pngimg.com/uploads/cursor/cursor_PNG100716.png);background-repeat:no-repeat;background-size:100px 100px;transform:scale(0.7,0.7);height:200px;width:200px">

    </div>
  <canvas id="game" style="pointer-events:all" width="192" height="192"></canvas>
  <div id="hud" style="pointer-events:none">
    <div></div>
    <div id="quest">
      <h4 class="title"></h4>
      <h4></h4>
      <h4></h4>
      <table>
        <tr>
          <th>Distance travelled</th>
          <td></td>
        </tr>
        <tr>
          <th>Tokens collected</th>
          <td></td>
        </tr>
        <tr>
          <th>Big tokens collected</th>
          <td></td>
        </tr>
        <tr>
          <th>Asteroids destroyed</th>
          <td></td>
        </tr>
        <tr>
          <th>Places visited</th>
          <td></td>
        </tr>
        <tr>
          <th>Mission completed</th>
          <td></td>
        </tr>
        <tr>
          <th class="total">TOTAL</th>
          <td class="total"></td>
        </tr>
      </table>
    </div>
    <div><a id="ok">OK</a></div>
  </div>
  <div id="ctrl" style="pointer-events:all">
    <h3></h3>
    <div>
      <h3></h3><a id="prev">&lt;</a><a id="play"></a><a id="next">&gt;</a>
    </div>
  </div>
  <div>
    <i id="fs" title="Fullscreen"></i>
    <i id="sfx" title="Audio"></i>
  </div>
  <div id="load" >
    <div>
      <h1>SPACECRAFT</h1>
    </div>
    <div style="display:none;">
      <p id="keys">
        <b>JUMP</b> - <b>UP</b> arrow key<br />
        <b>SHRINK</b> - <b>DOWN</b> arrow key<br />
        <b>MOVE</b> - <b>LEFT / RIGHT</b> arrow keys<br />
        <b>BOOST</b> - <b>SPACE</b> key
      </p>
      <p id="touch">
        <b>JUMP</b> - Swipe <b>UP</b><br />
        <b>SHRINK</b> - Swipe <b>DOWN</b><br />
        <b>MOVE</b> - Swipe <b>LEFT / RIGHT</b><br />
        <b>BOOST</b> - <b>TAP</b>
      </p>
      <p>
        <b class="pink">BIG TOKENS</b> help you collect small ones.<br />
        Use <b>SHRINK</b> to go through <b class="red">SPACE JUNK</b>.<br />
        Use <b>BOOST</b> to destroy <b class="cyan">ASTEROIDS</b>.
      </p>
    </div>
    <div><a id="start">START</a></div>
  </div>

  <script src="script.js"></script>
  <script type="text/javascript">
    // Classifier Variable
    let classifier;
    // Model URL
    let imageModelURL = 'https://teachablemachine.withgoogle.com/models/Qa6uDlDWc/';
    let ip='';
    // Video
    let video;
    let flippedVideo;
    // To store the classification

    let label = "";
    var handpose;
    let predictions = [];

    // Load the model first
    function preload() {
      classifier = ml5.imageClassifier(imageModelURL + 'model.json');

    }
    function modelReady() {
      console.log("Model ready! Handpose");
    }
    function setup() {
      createCanvas(1600, 700);
      // Create the video
      video = createCapture(VIDEO);
      video.hide()
      //video.size(1600, 650);


      //This is new Fliped Videos
      handpose = ml5.handpose(video, modelReady);
      flippedVideo = ml5.flipImage(video);
      // Start classifying
      handpose.on("predict", results => {
        predictions = results;
      });
      classifyVideo();
    }

    function draw() {
      background(0);
      // Draw the video

      image(video,0,0,1600,650)
      classifyVideo();
        drawKeypoints()


      // Draw the label
      fill(255);
      textSize(16);
      textAlign(CENTER);
      text(label, width / 2, height - 4);


    }

    // Get a prediction for the current video frame
    function classifyVideo() {
      flippedVideo = ml5.flipImage(video)
      classifier.classify(flippedVideo, gotResult);
      flippedVideo.remove();

    }

    // When we get a result
    function gotResult(error, results) {
      // If there is an error


        label = results[0].label;
        console.log('Prediction:'+label)
      // Classifiy again!
        classifyVideo();

    }
    function drawKeypoints() {
        var cursor=document.getElementById('cursor')
      for (let i = 0; i < predictions.length; i += 1) {
      const prediction = predictions[i];
      console.log(prediction)
      var hw=prediction.boundingBox.bottomRight
      var xy=prediction.boundingBox.topLeft
      console.log(xy+'---'+hw)

       fill(120, 255, 0);
       noStroke();
       var x=(xy[0]*4.0)+hw[0]/2
       var y=(xy[1]*2.3)+hw[1]/2
       console.log(x+'==='+y)
       console.log(xy[0]*4.0+"------"+xy[1]*2.0)

       ellipse(x,y,30,30)
       fill(200,255,0)
      //rect(xy[0]*4.0,xy[1]*2.0,hw[0],hw[1])
       cursor.style.left=x+'px'
       cursor.style.top=y+'px'
       var el=document.elementFromPoint(x,y)
       try{
       console.log(el.id)
      }
      catch(e){
        console.log(e)
      }
     }
    }
  </script>
</body>


</html>
